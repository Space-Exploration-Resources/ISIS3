<?xml version="1.0" encoding="UTF-8"?>

<application name="lronaccal" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://isis.astrogeology.usgs.gov/Schemas/Application/application.xsd">

  <brief>
    Radiometrically calibrates a LROC NAC image
  </brief>

  <description>
    <p>
    This application will calibrate EDR images taken by the ShadowCam TDI Camera. After companding and formatting for ISIS's tiling format, 
    the bias pixel average must be calculated per each channel. Once the average is calculated, the non-seen columns for per channel must 
    be cropped. The resulting image will be smaller than the original image.
    
    The pixel width will be reduced from 3144 total of all six channels, to 3072 for all six channels. 
    The remaining calibration steps can then be performed on the reduced image.
    </p>


    </p>
  </description>

  <history>
    <change name="Victor Silva" date="2022-04-02">
      Original version
    </change>
  </history>

  <category>
    <missionItem>Korean Pathfinder Lunar Orbiter</missionItem>
  </category>

  <seeAlso>
    <applications>
      <item>shadowcamcal</item>
    </applications>
  </seeAlso>

  <groups>
    <group name="Files">
      <parameter name="FROM">
        <type>cube</type>
        <fileMode>input</fileMode>
        <brief>
          Level 0 ShadowCam image
        </brief>
        <description>
          An uncalibrated ShadowCam image
        </description>
        <filter>
          *.cub
        </filter>
      </parameter>

      <parameter name="TO">
        <type>cube</type>
        <fileMode>output</fileMode>
        <pixelType>real</pixelType>
        <brief>
          Level 1 ShadowCam TDI image
        </brief>
        <description>
          The resultant radiometrically calibrated cube
        </description>
      </parameter>
    </group>

    <group name="Bias Pixel Subtraction">
      <parameter name="BiasPixelSubtract">
        <type>boolean</type>
        <default><item>True</item></default>
        <brief>
        Calibrate using the masked pixels.
        </brief>
        <description>
        </description>
        <inclusions><item>MaskedFile</item></inclusions>
      </parameter>
      <parameter name="BiasPixelFile">
        <type>filename</type>
        <default><item>Default</item></default>
        <brief>
        </brief>
        <description>
        </description>
      </parameter>
    </group>
    
    <group name="Dark Options">
      <parameter name="DarkCorrect">
        <type>boolean</type>
        <default><item>True</item></default>
        <brief>
        Calibrate using the average dark pixels.
        </brief>
        <description>
        </description>
        <inclusions><item>DarkFile</item></inclusions>
      </parameter>
      
      <parameter name="DarkFile">
        <type>filename</type>
        <default><item>Default</item></default>
        <brief>
        Calibrate using the average dark pixels.
        </brief>
        <description>
        </description>
      </parameter>
    </group>
      
    <group name="Nonlinearity Options">
      <parameter name="Nonlinearity">
        <type>boolean</type>
        <default><item>True</item></default>
        <brief>
        Calibrate using nonlinearity.
        </brief>
        <description>
        </description>
        <inclusions>
          <item>OffsetFile</item>
          <item>NonlinearityFile</item>
        </inclusions>
      </parameter>
      
      <parameter name="NonlinearityFile">
        <type>filename</type>
        <default><item>Default</item></default>
        <brief>
        Calibrate using the average dark pixels.
        </brief>
        <description>
        </description>
      </parameter>
    </group>
      
    <group name="Flatfield Options">
      <parameter name="Flatfield">
        <type>boolean</type>
        <default><item>True</item></default>
        <brief>
        Calibrate using the flatfield.
        </brief>
        <description>
        </description>
        <inclusions><item>FlatfieldFile</item></inclusions>
      </parameter>
      
      <parameter name="FlatfieldFile">
        <type>filename</type>
        <default><item>Default</item></default>
        <brief>
        Calibrate using the average dark pixels.
        </brief>
        <description>
        </description>
      </parameter>
    </group>
      
    <group name="Radiometric Options">
      <parameter name="Radiometric">
        <type>boolean</type>
        <default><item>True</item></default>
        <brief>
        Calibrate using radiometric calibration.
        </brief>
        <description>
        </description>
        <inclusions>
          <item>RadiometricType</item>
          <item>RadiometricFile</item>
        </inclusions>
      </parameter>
      
      <parameter name="RadiometricType">
        <type>string</type>
        <brief>
        Which radiance correction?
        </brief>
        <description>
        </description>
        <default><item>IOF</item></default>
        <list>
          <option value="IOF">
            <brief>I/F</brief>
            <description>
            </description>
          </option>
          <option value="RADIANCE">
            <brief>Radiance</brief>
            <description>
            </description>
          </option>
        </list>
      </parameter>
      
      <parameter name="RadiometricFile">
        <type>filename</type>
        <default><item>Default</item></default>
        <brief>
        </brief>
        <description>
        </description>
      </parameter>
    </group>
  </groups>
</application>
